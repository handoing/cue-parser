var S=Object.defineProperty,F=t=>S(t,"__esModule",{value:!0}),P=(t,e)=>{F(t);for(var i in e)S(t,i,{get:e[i],enumerable:!0})};P(exports,{generate:()=>D,parser:()=>y,tokenizer:()=>K});var X={isWhiteSpace(t){return t===32},isLetter(t){return t>=65&&t<=90||t>=97&&t<=122},isChar(t){return t===123||t===125||t===32||t===10||t===9||t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122}},n=X,E={};E.CHARACTER_TOKEN="CHARACTER_TOKEN";E.START_TAG_TOKEN="START_TAG_TOKEN";E.END_TAG_TOKEN="END_TAG_TOKEN";E.EOF_TOKEN="EOF_TOKEN";E.EXP_START_IF_TOKEN="EXP_START_IF_TOKEN";E.EXP_THEN_IF_TOKEN="EXP_THEN_IF_TOKEN";E.EXP_END_IF_TOKEN="EXP_END_IF_TOKEN";var o=E,_="DATA_STATE",O="TAG_OPEN_STATE",x="TAG_NAME_STATE",N="TAG_CLOSE_STATE",c="BEFORE_ATTRIBUTE_NAME_STATE",R="ATTRIBUTE_NAME_STATE",p="BEFORE_ATTRIBUTE_VALUE_STATE",v="ATTRIBUTE_VALUE_DOUBLE_QUOTED_STATE",I="AFTER_ATTRIBUTE_VALUE_QUOTED_STATE",C="ATTRIBUTE_VALUE_DOUBLE_BRACE_STATE",g="AFTER_ATTRIBUTE_VALUE_BRACE_STATE",d="TEXT_STATE",U="EXPRESSION_START",u="EXPRESSION",m="c-",$=class{constructor(e){this.source=e,this.length=e.length,this.index=0,this.state=_,this.currentToken=null,this.currentAttr=null,this.buffer=[]}eof(){return this.index>=this.length}lex(){for(;!this.buffer.length&&!this.eof();){let e=this.source.charCodeAt(this.index);this[this.state](e,this.source[this.index])}return this.buffer.shift()}peek(e){return this.source.charCodeAt(this.index+e)}[_](e){n.isWhiteSpace(e)||e===10?++this.index:e===60?(this.state=O,++this.index):n.isLetter(e)?(this._createTextToken(),this.state=d):e===123?(this.peek(2)===35||this.peek(2)===47)&&this.peek(1)===123?this.index+=2:(this._createTextToken(),this.state=d):(e===35||e===47)&&(this.state=U,++this.index)}[d](e,i){n.isChar(e)||e===46?(this.currentToken.value+=i,++this.index):e===60&&(this._emitCurrentToken(),this.state=_)}[N](e){n.isLetter(e)&&(this._createEndTagToken(),this.state=x)}[O](e){n.isLetter(e)?(this._createStartTagToken(),this.state=x):this.source.charCodeAt(this.index)===47&&(this.state=N,++this.index)}[x](e,i){n.isLetter(e)?(this.currentToken.value+=i,++this.index):n.isWhiteSpace(e)||e===10?(this.state=c,++this.index):e===62&&(this.state=_,++this.index,this._emitCurrentToken())}[c](e){n.isLetter(e)?(this._createAttr(""),this.state=R):(n.isWhiteSpace(e)||e===10||e===9)&&++this.index}[R](e,i){n.isLetter(e)||e===45?(this.currentAttr.name+=i,++this.index):e===61&&(this.state=p,++this.index)}[p](e){e===34?(this.state=v,++this.index):e===123&&this.peek(1)===123&&(this.state=C,this.index+=2)}[v](e,i){e!==34?(this.currentAttr.value+=i,++this.index):e===34&&(this.currentAttr.name.indexOf(m)===0?this.currentToken.directives.push(this.currentAttr):this.currentToken.attrs.push(this.currentAttr),this.state=I,++this.index)}[I](e){e===62?(this.state=_,++this.index,this._emitCurrentToken()):n.isWhiteSpace(e)||e===10||e===9?++this.index:n.isLetter(e)?this.state=c:(e===47||this.peek(1)===62)&&(this.state=_,this.index+=2,this._emitCurrentCloseToken())}[C](e,i){e!==125?(this.currentAttr.value+=i,++this.index):e===125&&this.peek(1)===125&&(this.currentAttr.name.indexOf(m)===0?this.currentToken.directives.push(this.currentAttr):this.currentToken.attrs.push(this.currentAttr),this.state=g,this.index+=2)}[g](e){e===62?(this.state=_,++this.index,this._emitCurrentToken()):n.isWhiteSpace(e)||e===10||e===9?++this.index:n.isLetter(e)&&(this.state=c)}[U](e){e===105||e===102?++this.index:n.isWhiteSpace(e)?++this.index:e===101?(this._createExpressionThenIf(),this.state=u):e===125?(this._createExpressionEndIf(),this.state=u):n.isLetter(e)&&(this._createExpressionStartIf(),this.state=u)}[u](e,i){n.isLetter(e)?(this.currentToken.value+=i,++this.index):n.isWhiteSpace(e)?++this.index:e===125&&(++this.index,this.source.charCodeAt(this.index)===125&&(this.state=_,++this.index,this._emitCurrentToken()))}_emitCurrentToken(){let e=this.currentToken;this.buffer.push(e)}_emitCurrentCloseToken(){let e=this.currentToken.value;this._emitCurrentToken(),this._createEndTagToken(),this.currentToken.value=e,this._emitCurrentToken()}_createAttr(e){this.currentAttr={name:e,value:""}}_createStartTagToken(){this.currentToken={type:o.START_TAG_TOKEN,value:"",attrs:[],directives:[]}}_createEndTagToken(){this.currentToken={type:o.END_TAG_TOKEN,value:""}}_createTextToken(){this.currentToken={type:o.CHARACTER_TOKEN,value:""}}_createExpressionStartIf(){this.currentToken={type:o.EXP_START_IF_TOKEN,value:""}}_createExpressionThenIf(){this.currentToken={type:o.EXP_THEN_IF_TOKEN,value:""}}_createExpressionEndIf(){this.currentToken={type:o.EXP_END_IF_TOKEN,value:""}}},L=$,B=class{constructor(e){this.scanner=new L(e)}getNextToken(){if(!this.scanner.eof()){let e=this.scanner.lex();if(e)return e}}};function K(t){let e=[],i=new B(t);try{for(;;){let s=i.getNextToken();if(!s)break;e.push(s)}}catch(s){console.error(s)}return e}function y(t){let e=[],i=[],s=0,T,r;for(;s<t.length;){let h=t[s];switch(h.type){case o.START_TAG_TOKEN:e.push({type:"tag",name:h.value,attrs:h.attrs,directives:h.directives,children:[]});break;case o.CHARACTER_TOKEN:let a=e[e.length-1];a?a.children.push({type:"text",data:h.value}):i.push({type:"text",data:h.value});break;case o.END_TAG_TOKEN:r=e.pop(),T=e[e.length-1],T?T.children.push(r):i.push(r);break;case o.EXP_START_IF_TOKEN:e.push({type:"if",expression:h.value}),e.push({children:[]});break;case o.EXP_THEN_IF_TOKEN:r=e.pop(),T=e[e.length-1],T&&(T.if=r.children),e.push({children:[]});break;case o.EXP_END_IF_TOKEN:r=e.pop(),T=e[e.length-1],T&&(T.else=r.children),r=e.pop(),T=e[e.length-1],T?T.children.push(r):i.push(r);break}s++}return i}var b=function(){let t={"on-click":function(e){return e=e.replace(/this/g,"_ctx"),`function($event) { ${e} }`}};return function(e,i){return t[e]?t[e](i):`"${i}"`}}(),G=function(){let t={"c-show":function(e){return"_vShow"},"c-hide":function(e){return"_vHide"}};return function(e,i){return t[e]?t[e](i):`"${e}"`}}();function V(t){let e=Object.keys(t).reduce((i,s,T)=>{let r=`"${s}"`,h=b(s,t[s]);return i+=`${r}: ${k(h,{isAnalysisEvent:!0})},`},"");return`{ ${e} }`}function w(t){let e=Object.keys(t).reduce((i,s,T)=>{let r=G(s,t[s]),h=t[s];return i+=`[${r}, ${k(h)}],`},"");return`[ ${e} ]`}function k(t,{isAnalysisEvent:e}={}){let i=t.match(/\{\{(.+?)\}\}/);if(i){let s=i.input.substring(0,i.index),T=i.input.substring(i.index+i[0].length,i.input.length),r=`${s}" + _string(_ctx.data.${i[1]}) + "${T}`;return e?r:`"${r}"`}else return e?t:`"${t}"`}function H(t,e){let i=e===0?"":",";if(t.type==="text")return`${i}_createText(${k(t.data)})`;if(t.type==="tag"){let s=t.attrs.length>0,T=t.directives.length>0,r={},h={},a="";return s&&t.attrs.map(({name:A,value:l})=>{r[A]=l}),a=`_creatElement('${t.name}', ${V(r)}, [ ${t.children?f(t.children):""} ])`,T&&(t.directives.map(({name:A,value:l})=>{h[A]=l}),a=`_withDirectives(${a}, ${w(h)})`),`${i} ${a}`}if(t.type==="if")return`${i}_if(_ctx.data.${t.expression}, function() { return ${t.if?f(t.if):"[]"} }, function() { return ${t.else?f(t.else):"[]"} })`}function f(t){return t.map(function(e,i){return H(e,i)}).join("")}function D(t,e){let i=f(t);return`function create(_ctx) { return ${i} }`}
