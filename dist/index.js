var p=Object.defineProperty,G=t=>p(t,"__esModule",{value:!0}),w=(t,e)=>{G(t);for(var i in e)p(t,i,{get:e[i],enumerable:!0})};w(exports,{compile:()=>Y,generate:()=>N,parser:()=>O,tokenizer:()=>S});var V={isWhiteSpace(t){return t===32},isLetter(t){return t===45||t===95||t>=65&&t<=90||t>=97&&t<=122},isChar(t){return t===123||t===125||t===32||t===10||t===9||t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122}},T=V,E={};E.CHARACTER_TOKEN="CHARACTER_TOKEN";E.START_TAG_TOKEN="START_TAG_TOKEN";E.END_TAG_TOKEN="END_TAG_TOKEN";E.EOF_TOKEN="EOF_TOKEN";E.EXP_START_IF_TOKEN="EXP_START_IF_TOKEN";E.EXP_THEN_IF_TOKEN="EXP_THEN_IF_TOKEN";E.EXP_END_IF_TOKEN="EXP_END_IF_TOKEN";E.EXP_START_FOR_TOKEN="EXP_START_FOR_TOKEN";E.EXP_END_FOR_TOKEN="EXP_END_FOR_TOKEN";var h=E,o="DATA_STATE",I="TAG_OPEN_STATE",x="TAG_NAME_STATE",F="TAG_CLOSE_STATE",u="BEFORE_ATTRIBUTE_NAME_STATE",v="ATTRIBUTE_NAME_STATE",m="BEFORE_ATTRIBUTE_VALUE_STATE",g="ATTRIBUTE_VALUE_DOUBLE_QUOTED_STATE",C="AFTER_ATTRIBUTE_VALUE_QUOTED_STATE",$="ATTRIBUTE_VALUE_DOUBLE_BRACE_STATE",K="AFTER_ATTRIBUTE_VALUE_BRACE_STATE",d="TEXT_STATE",P="IF_EXPRESSION_START",f="IF_EXPRESSION",X="IF_EXPRESSION_END",U="FOR_EXPRESSION_START",k="FOR_EXPRESSION",y="FOR_EXPRESSION_END",D="c-",L=class{constructor(e){this.source=e,this.length=e.length,this.index=0,this.state=o,this.currentToken=null,this.currentAttr=null,this.buffer=[]}eof(){return this.index>=this.length}lex(){for(;!this.buffer.length&&!this.eof();){let e=this.source.charCodeAt(this.index);this[this.state](e,this.source[this.index])}return this.buffer.shift()}peek(e){return this.source.charCodeAt(this.index+e)}[o](e){T.isWhiteSpace(e)||e===10?++this.index:e===60?(this.state=I,++this.index):T.isLetter(e)?(this._createTextToken(),this.state=d):e===123?(this.peek(2)===35||this.peek(2)===47)&&this.peek(1)===123?this.index+=2:(this._createTextToken(),this.state=d):(e===35||e===47)&&(this.peek(1)===105&&this.peek(2)===102||this.peek(1)===101?(this.state=P,++this.index):this.peek(1)===108&&this.peek(2)===105&&(this.state=U,++this.index))}[d](e,i){T.isChar(e)||e===46?(this.currentToken.value+=i,++this.index):e===60&&(this._emitCurrentToken(),this.state=o)}[F](e){T.isLetter(e)&&(this._createEndTagToken(),this.state=x)}[I](e){T.isLetter(e)?(this._createStartTagToken(),this.state=x):this.source.charCodeAt(this.index)===47&&(this.state=F,++this.index)}[x](e,i){T.isLetter(e)?(this.currentToken.value+=i,++this.index):T.isWhiteSpace(e)||e===10?(this.state=u,++this.index):e===62&&(this.state=o,++this.index,this._emitCurrentToken())}[u](e){T.isLetter(e)?(this._createAttr(""),this.state=v):(T.isWhiteSpace(e)||e===10||e===9)&&++this.index}[v](e,i){T.isLetter(e)||e===45?(this.currentAttr.name+=i,++this.index):e===61&&(this.state=m,++this.index)}[m](e){e===34?(this.state=g,++this.index):e===123&&this.peek(1)===123&&(this.state=$,this.index+=2)}[g](e,i){e!==34?(this.currentAttr.value+=i,++this.index):e===34&&(this.currentAttr.name.indexOf(D)===0?this.currentToken.directives.push(this.currentAttr):this.currentToken.attrs.push(this.currentAttr),this.state=C,++this.index)}[C](e){e===62?(this.state=o,++this.index,this._emitCurrentToken()):T.isWhiteSpace(e)||e===10||e===9?++this.index:T.isLetter(e)?this.state=u:(e===47||this.peek(1)===62)&&(this.state=o,this.index+=2,this._emitCurrentCloseToken())}[$](e,i){e!==125?(this.currentAttr.value+=i,++this.index):e===125&&this.peek(1)===125&&(this.currentAttr.name.indexOf(D)===0?this.currentToken.directives.push(this.currentAttr):this.currentToken.attrs.push(this.currentAttr),this.state=K,this.index+=2)}[K](e){e===62?(this.state=o,++this.index,this._emitCurrentToken()):T.isWhiteSpace(e)||e===10||e===9?++this.index:T.isLetter(e)&&(this.state=u)}[P](e){e===105||e===102?++this.index:T.isWhiteSpace(e)?++this.index:e===101?(this._createExpressionThenIf(),this.state=f):e===125?(this._createExpressionEndIf(),this.state=f):T.isLetter(e)&&(this._createExpressionStartIf(),this.state=f)}[f](e,i){T.isLetter(e)?(this.currentToken.value+=i,++this.index):T.isWhiteSpace(e)?++this.index:e===125&&(++this.index,this.state=X)}[X](e,i){e===125&&(this.state=o,++this.index,this._emitCurrentToken())}[U](e,i){e===108||e===105||e===115||e===116?this.peek(1)===105&&this.peek(2)===115&&this.peek(3)===116&&(this.index+=4):T.isWhiteSpace(e)?++this.index:e===125?(this._createExpressionEndFor(),this.state=k):T.isLetter(e)&&(this._createExpressionStartFor(),this.state=k)}[k](e,i){T.isLetter(e)?(this.currentToken.value+=i,++this.index):T.isWhiteSpace(e)?(this.currentToken.value+=i,++this.index):e===125&&(++this.index,this.state=y)}[y](e,i){e===125&&(this.state=o,++this.index,this._emitCurrentToken())}_emitCurrentToken(){let e=this.currentToken;this.buffer.push(e)}_emitCurrentCloseToken(){let e=this.currentToken.value;this._emitCurrentToken(),this._createEndTagToken(),this.currentToken.value=e,this._emitCurrentToken()}_createAttr(e){this.currentAttr={name:e,value:""}}_createStartTagToken(){this.currentToken={type:h.START_TAG_TOKEN,value:"",attrs:[],directives:[]}}_createEndTagToken(){this.currentToken={type:h.END_TAG_TOKEN,value:""}}_createTextToken(){this.currentToken={type:h.CHARACTER_TOKEN,value:""}}_createExpressionStartIf(){this.currentToken={type:h.EXP_START_IF_TOKEN,value:""}}_createExpressionThenIf(){this.currentToken={type:h.EXP_THEN_IF_TOKEN,value:""}}_createExpressionEndIf(){this.currentToken={type:h.EXP_END_IF_TOKEN,value:""}}_createExpressionStartFor(){this.currentToken={type:h.EXP_START_FOR_TOKEN,value:""}}_createExpressionEndFor(){this.currentToken={type:h.EXP_END_FOR_TOKEN,value:""}}},B=L,b=class{constructor(e){this.scanner=new B(e)}getNextToken(){if(!this.scanner.eof()){let e=this.scanner.lex();if(e)return e}}};function W(t){let e=[],i=new b(t);try{for(;;){let n=i.getNextToken();if(!n)break;e.push(n)}}catch(n){console.error(n)}return e}var S=W;function H(t){let e=[],i=[],n=0,s,r;for(;n<t.length;){let _=t[n];switch(_.type){case h.START_TAG_TOKEN:e.push({type:"tag",name:_.value,attrs:_.attrs,directives:_.directives,children:[]});break;case h.CHARACTER_TOKEN:let a=e[e.length-1];a?a.children.push({type:"text",data:_.value}):i.push({type:"text",data:_.value});break;case h.END_TAG_TOKEN:r=e.pop(),s=e[e.length-1],s?s.children.push(r):i.push(r);break;case h.EXP_START_IF_TOKEN:e.push({type:"if",expression:_.value}),e.push({children:[]});break;case h.EXP_THEN_IF_TOKEN:r=e.pop(),s=e[e.length-1],s&&(s.if=r.children),e.push({children:[]});break;case h.EXP_END_IF_TOKEN:r=e.pop(),s=e[e.length-1],s&&(s.else=r.children),r=e.pop(),s=e[e.length-1],s?s.children.push(r):i.push(r);break;case h.EXP_START_FOR_TOKEN:e.push({type:"for",expression:_.value,children:[]});break;case h.EXP_END_FOR_TOKEN:r=e.pop(),s=e[e.length-1],s?s.children.push(r):i.push(r);break}n++}return i}var O=H,z=function(){let t={"on-click":function(e){return e=e.replace(/this/g,"_ctx"),`function($event) { ${e} }`}};return function(e,i){return t[e]?t[e](i):`"${i}"`}}(),M=function(){let t={"c-show":function(e){return"_vShow"},"c-hide":function(e){return"_vHide"}};return function(e,i){return t[e]?t[e](i):`"${e}"`}}();function Q(t){let e=Object.keys(t).reduce((i,n,s)=>{let r=`"${n}"`,_=z(n,t[n]);return i+=`${r}: ${R(_,{isAnalysisEvent:!0})},`},"");return`{ ${e} }`}function j(t){let e=Object.keys(t).reduce((i,n,s)=>{let r=M(n,t[n]),_=t[n];return i+=`[${r}, ${R(_)}],`},"");return`[ ${e} ]`}function R(t,{isAnalysisEvent:e}={}){let i=t.match(/\{\{(.+?)\}\}/);if(i){let n=i.input.substring(0,i.index),s=i.input.substring(i.index+i[0].length,i.input.length),r=`${n}" + _string(_ctx.data.${i[1]}) + "${s}`;return e?r:`"${r}"`}else return e?t:`"${t}"`}function q(t,e){let i=e===0?"":",";if(t.type==="text")return`${i}_createText(${R(t.data)})`;if(t.type==="tag"){let n=t.attrs.length>0,s=t.directives.length>0,r={},_={},a="";return n&&t.attrs.map(({name:l,value:A})=>{r[l]=A}),a=`_creatElement('${t.name}', ${Q(r)}, [ ${t.children?c(t.children):""} ])`,s&&(t.directives.map(({name:l,value:A})=>{_[l]=A}),a=`_withDirectives(${a}, ${j(_)})`),`${i} ${a}`}if(t.type==="if")return`${i}_if(_ctx.data.${t.expression}, function() { return ${t.if?c(t.if):"[]"} }, function() { return ${t.else?c(t.else):"[]"} })`;if(t.type==="for"){let[n,s,r]=t.expression.split(/ as | by /g);return`${i}_for(_ctx.data.${n}, function(${s}, ${r}) { return [ ${t.children?c(t.children):""} ] })`}}function c(t){return t.map(function(e,i){return q(e,i)}).join("")}function J(t,e){let i=c(t);return`function create(_ctx) { return ${i} }`}var N=J;function Y(t){let e=S(t),i=O(e),n=N(i),s=new Function(`return ${n}`);return s()}
