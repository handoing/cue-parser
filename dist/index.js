var x=Object.defineProperty,F=t=>x(t,"__esModule",{value:!0}),v=(t,e)=>{F(t);for(var i in e)x(t,i,{get:e[i],enumerable:!0})};v(exports,{generate:()=>g,parser:()=>K,tokenizer:()=>B});var y={isWhiteSpace(t){return t===32},isLetter(t){return t>=65&&t<=90||t>=97&&t<=122},isChar(t){return t===123||t===125||t===32||t===10||t===9||t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122}},s=y,E={};E.CHARACTER_TOKEN="CHARACTER_TOKEN";E.START_TAG_TOKEN="START_TAG_TOKEN";E.END_TAG_TOKEN="END_TAG_TOKEN";E.EOF_TOKEN="EOF_TOKEN";E.EXP_START_IF_TOKEN="EXP_START_IF_TOKEN";E.EXP_THEN_IF_TOKEN="EXP_THEN_IF_TOKEN";E.EXP_END_IF_TOKEN="EXP_END_IF_TOKEN";var r=E,_="DATA_STATE",k="TAG_OPEN_STATE",c="TAG_NAME_STATE",S="TAG_CLOSE_STATE",o="BEFORE_ATTRIBUTE_NAME_STATE",d="ATTRIBUTE_NAME_STATE",N="BEFORE_ATTRIBUTE_VALUE_STATE",O="ATTRIBUTE_VALUE_DOUBLE_QUOTED_STATE",R="AFTER_ATTRIBUTE_VALUE_QUOTED_STATE",I="ATTRIBUTE_VALUE_DOUBLE_BRACE_STATE",p="AFTER_ATTRIBUTE_VALUE_BRACE_STATE",f="TEXT_STATE",C="EXPRESSION_START",u="EXPRESSION",m=class{constructor(e){this.source=e,this.length=e.length,this.index=0,this.state=_,this.currentToken=null,this.currentAttr=null,this.buffer=[]}eof(){return this.index>=this.length}lex(){for(;!this.buffer.length&&!this.eof();){let e=this.source.charCodeAt(this.index);this[this.state](e,this.source[this.index])}return this.buffer.shift()}peek(e){return this.source.charCodeAt(this.index+e)}[_](e){s.isWhiteSpace(e)||e===10?++this.index:e===60?(this.state=k,++this.index):s.isLetter(e)?(this._createTextToken(),this.state=f):e===123?(this.peek(2)===35||this.peek(2)===47)&&this.peek(1)===123?this.index+=2:(this._createTextToken(),this.state=f):(e===35||e===47)&&(this.state=C,++this.index)}[f](e,i){s.isChar(e)||e===46?(this.currentToken.value+=i,++this.index):e===60&&(this._emitCurrentToken(),this.state=_)}[S](e){s.isLetter(e)&&(this._createEndTagToken(),this.state=c)}[k](e){s.isLetter(e)?(this._createStartTagToken(),this.state=c):this.source.charCodeAt(this.index)===47&&(this.state=S,++this.index)}[c](e,i){s.isLetter(e)?(this.currentToken.value+=i,++this.index):s.isWhiteSpace(e)||e===10?(this.state=o,++this.index):e===62&&(this.state=_,++this.index,this._emitCurrentToken())}[o](e){s.isLetter(e)?(this._createAttr(""),this.state=d):(s.isWhiteSpace(e)||e===10||e===9)&&++this.index}[d](e,i){s.isLetter(e)||e===45?(this.currentAttr.name+=i,++this.index):e===61&&(this.state=N,++this.index)}[N](e){e===34?(this.state=O,++this.index):e===123&&this.peek(1)===123&&(this.state=I,this.index+=2)}[O](e,i){e!==34?(this.currentAttr.value+=i,++this.index):e===34&&(this.currentToken.attrs.push(this.currentAttr),this.state=R,++this.index)}[R](e){e===62?(this.state=_,++this.index,this._emitCurrentToken()):s.isWhiteSpace(e)||e===10||e===9?++this.index:s.isLetter(e)?this.state=o:(e===47||this.peek(1)===62)&&(this.state=_,this.index+=2,this._emitCurrentCloseToken())}[I](e,i){e!==125?(this.currentAttr.value+=i,++this.index):e===125&&this.peek(1)===125&&(this.currentToken.attrs.push(this.currentAttr),this.state=p,this.index+=2)}[p](e){e===62?(this.state=_,++this.index,this._emitCurrentToken()):s.isWhiteSpace(e)||e===10||e===9?++this.index:s.isLetter(e)&&(this.state=o)}[C](e){e===105||e===102?++this.index:s.isWhiteSpace(e)?++this.index:e===101?(this._createExpressionThenIf(),this.state=u):e===125?(this._createExpressionEndIf(),this.state=u):s.isLetter(e)&&(this._createExpressionStartIf(),this.state=u)}[u](e,i){s.isLetter(e)?(this.currentToken.value+=i,++this.index):s.isWhiteSpace(e)?++this.index:e===125&&(++this.index,this.source.charCodeAt(this.index)===125&&(this.state=_,++this.index,this._emitCurrentToken()))}_emitCurrentToken(){let e=this.currentToken;this.buffer.push(e)}_emitCurrentCloseToken(){let e=this.currentToken.value;this._emitCurrentToken(),this._createEndTagToken(),this.currentToken.value=e,this._emitCurrentToken()}_createAttr(e){this.currentAttr={name:e,value:""}}_createStartTagToken(){this.currentToken={type:r.START_TAG_TOKEN,value:"",attrs:[]}}_createEndTagToken(){this.currentToken={type:r.END_TAG_TOKEN,value:""}}_createTextToken(){this.currentToken={type:r.CHARACTER_TOKEN,value:""}}_createExpressionStartIf(){this.currentToken={type:r.EXP_START_IF_TOKEN,value:""}}_createExpressionThenIf(){this.currentToken={type:r.EXP_THEN_IF_TOKEN,value:""}}_createExpressionEndIf(){this.currentToken={type:r.EXP_END_IF_TOKEN,value:""}}},U=m,L=class{constructor(e){this.scanner=new U(e)}getNextToken(){if(!this.scanner.eof()){let e=this.scanner.lex();if(e)return e}}};function B(t){let e=[],i=new L(t);try{for(;;){let h=i.getNextToken();if(!h)break;e.push(h)}}catch(h){console.error(h)}return e}function K(t){let e=[],i=[],h=0,n,T;for(;h<t.length;){let a=t[h];switch(a.type){case r.START_TAG_TOKEN:e.push({type:"tag",name:a.value,attrs:a.attrs,children:[]});break;case r.CHARACTER_TOKEN:let l=e[e.length-1];l?l.children.push({type:"text",data:a.value}):i.push({type:"text",data:a.value});break;case r.END_TAG_TOKEN:T=e.pop(),n=e[e.length-1],n?n.children.push(T):i.push(T);break;case r.EXP_START_IF_TOKEN:e.push({type:"if",expression:a.value}),e.push({children:[]});break;case r.EXP_THEN_IF_TOKEN:T=e.pop(),n=e[e.length-1],n&&(n.if=T.children),e.push({children:[]});break;case r.EXP_END_IF_TOKEN:T=e.pop(),n=e[e.length-1],n&&(n.else=T.children),T=e.pop(),n=e[e.length-1],n?n.children.push(T):i.push(T);break}h++}return i}function D(t){let e=t.match(/\{\{(.+?)\}\}/);return e?`_string(_ctx.data.${e[1]})`:`"${t}"`}function P(t,e){let i=e===0?"":",";if(t.type==="text")return`${i}_createText(${D(t.data)})`;if(t.type==="tag")return`${i}_creatElement('${t.name}', {}, [ ${t.children?A(t.children):""} ])`;if(t.type==="if")return`${i}_if(_ctx.data.${t.expression}, function() { return ${t.if?A(t.if):"[]"} }, function() { return ${t.else?A(t.else):"[]"} })`}function A(t){return t.map(function(e,i){return P(e,i)}).join("")}function g(t,e){let i=A(t);return`function create(_ctx) { return ${i} }`}
